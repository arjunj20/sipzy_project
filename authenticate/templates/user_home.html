{% extends "base.html" %}
{% load static %}

{% block title %}Sipzy – Premium Spirits{% endblock %}

{% block content %}


{% block extra_css %}
<style>
    /* ================= CINEMATIC HERO STYLES ================= */
    
    :root {
        --mouse-x: 50%;
        --mouse-y: 50%;
    }

    /* 1. Dynamic Background with Spotlight */
    .hero-cinematic {
        background: radial-gradient(
            circle at var(--mouse-x) var(--mouse-y), 
            rgba(162, 78, 52, 0.15) 0%, 
            rgba(26, 15, 10, 0) 50%
        ), linear-gradient(135deg, #1a0f0a 0%, #2d1810 100%);
        position: relative;
        overflow: hidden;
    }

    /* 2. Text Reveal Mask */
    .reveal-container {
        overflow: hidden;
        display: block;
    }
    
    .reveal-text {
        transform: translateY(100%);
        opacity: 0;
        animation: textSlideUp 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    @keyframes textSlideUp {
        0% { transform: translateY(100%); opacity: 0; }
        100% { transform: translateY(0); opacity: 1; }
    }

    /* 3. Parallax Elements */
    .parallax-layer {
        transition: transform 0.1s ease-out;
        will-change: transform;
    }

    /* 4. The Glass Pedestal */
    .glass-pedestal {
        background: linear-gradient(105deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.01) 100%);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255,255,255,0.15);
        border-left: 1px solid rgba(255,255,255,0.1);
        box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        transform-style: preserve-3d;
    }

    /* 5. Magnetic Button Hover */
    .btn-magnetic {
        transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275), box-shadow 0.3s ease;
    }
    .btn-magnetic:hover {
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 10px 20px rgba(162, 78, 52, 0.3);
    }

    /* Floating Dust Particles */
    .dust-speck {
        position: absolute;
        background: #fff;
        border-radius: 50%;
        opacity: 0.3;
        animation: floatDust 10s infinite linear;
    }
    @keyframes floatDust {
        0% { transform: translateY(0) translateX(0); opacity: 0; }
        50% { opacity: 0.5; }
        100% { transform: translateY(-100px) translateX(20px); opacity: 0; }
    }
    
    /* Stats Divider */
    .stat-divider {
        width: 1px;
        height: 40px;
        background: linear-gradient(to bottom, transparent, rgba(255,255,255,0.2), transparent);
    }
</style>
{% endblock %}

<!-- ================= ENHANCED HERO SECTION ================= -->
<section id="heroSection" class="hero-cinematic relative min-h-screen flex items-center justify-center px-6 md:px-16 overflow-hidden">
    
    <div class="absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-amber-600/20 rounded-full blur-[120px] parallax-layer" data-speed="-2"></div>
    <div class="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-red-900/20 rounded-full blur-[100px] parallax-layer" data-speed="2"></div>
    
    <div class="dust-speck w-1 h-1 top-1/4 left-1/4" style="animation-delay: 0s;"></div>
    <div class="dust-speck w-2 h-2 top-3/4 left-1/3" style="animation-delay: 2s;"></div>
    <div class="dust-speck w-1 h-1 top-1/2 left-2/3" style="animation-delay: 4s;"></div>

    <div class="container mx-auto grid grid-cols-1 md:grid-cols-12 gap-12 items-center relative z-10">
        
        <div class="md:col-span-7 flex flex-col gap-8">
            
            <div class="reveal-container">
                <div class="reveal-text" style="animation-delay: 0.1s;">
                    <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-amber-500/30 bg-amber-900/10 backdrop-blur-md text-amber-300 text-xs font-bold tracking-wider uppercase">
                        <span class="w-2 h-2 rounded-full bg-amber-400 animate-pulse"></span>
                        Premium Collection 2024
                    </span>
                </div>
            </div>

            <div class="reveal-container">
                <h1 class="reveal-text text-5xl md:text-7xl font-bold leading-[1.1] tracking-tight text-white" style="animation-delay: 0.3s;">
                    Taste the <br/>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-amber-200 via-amber-400 to-amber-600">Golden Legacy.</span>
                </h1>
            </div>

            <div class="reveal-container">
                <p class="reveal-text text-lg text-gray-300 leading-relaxed max-w-xl" style="animation-delay: 0.5s;">
                    Experience the finest selection of handcrafted spirits. 
                    From the highlands of Scotland to the valleys of Napa, 
                    we bring the world's most exclusive bottles to your doorstep.
                </p>
            </div>

            <div class="reveal-container">
                <div class="reveal-text flex flex-wrap gap-4 mt-2" style="animation-delay: 0.7s;">
                    <a href="{% url 'userproduct_list' %}" class="btn-magnetic px-8 py-4 bg-[#A24E34] text-white rounded-full font-semibold shadow-[0_10px_30px_rgba(162,78,52,0.4)] flex items-center gap-2">
                        Start Shopping 
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                    </a>
                    <a href="#featured-scroll" class="btn-magnetic px-8 py-4 rounded-full font-semibold text-white border border-white/20 hover:bg-white/10 backdrop-blur-sm transition-all">
                        View Collection
                    </a>
                </div>
            </div>

            <div class="reveal-container mt-8">
                <div class="reveal-text flex items-center gap-8 pt-8 border-t border-white/10" style="animation-delay: 0.9s;">
                    <div>
                        <p class="text-3xl font-bold text-white">500<span class="text-amber-500">+</span></p>
                        <p class="text-xs text-gray-400 uppercase tracking-wider">Labels</p>
                    </div>
                    <div class="stat-divider"></div>
                    <div>
                        <p class="text-3xl font-bold text-white">10k<span class="text-amber-500">+</span></p>
                        <p class="text-xs text-gray-400 uppercase tracking-wider">Members</p>
                    </div>
                    <div class="stat-divider"></div>
                    <div>
                        <p class="text-3xl font-bold text-white">4.9</p>
                        <p class="text-xs text-gray-400 uppercase tracking-wider">Rating</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="md:col-span-5 relative flex justify-center perspective-container">
            <div class="parallax-layer relative z-20" data-speed="4">
                
                <div class="glass-pedestal relative w-72 h-[450px] rounded-[40px] flex items-center justify-center">
                    
                    <div class="absolute inset-0 bg-gradient-to-b from-amber-500/10 to-transparent rounded-[40px]"></div>

                    <img src="/static/images/vapo1.png" alt="Premium Spirit" 
                         class="absolute -top-12 h-[120%] w-auto object-contain drop-shadow-[0_20px_40px_rgba(0,0,0,0.6)] filter brightness-110" 
                         style="transform: translateZ(50px);" />

                    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 w-max px-4 py-2 glass-card rounded-full border border-white/20 backdrop-blur-md">
                        <p class="text-xs text-white font-bold tracking-widest uppercase text-center">Master's Choice</p>
                    </div>
                </div>

                <div class="absolute -bottom-10 left-10 right-10 h-8 bg-black/40 blur-xl rounded-[100%]"></div>
            </div>
            
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[80%] border border-amber-500/20 rounded-full parallax-layer" data-speed="-1"></div>
        </div>

    </div>
</section>

<!-- ================= FEATURED PRODUCTS ================= -->
<section class="w-full py-16 text-center bg-white">
    
    <div class="mb-12 fade-in-up">
        <h2 class="text-3xl md:text-4xl font-bold mb-3 text-[#A24E34]">Featured Products</h2>
        <p class="text-gray-600">Handpicked premium spirits for the connoisseur</p>
    </div>

    <div class="scroll-container overflow-x-auto" id="featured-scroll">
        <div class="scroll-content slide-left" id="featured-content">
            {% for p in featured_products %}
            <div class="product-card flex-shrink-0 relative">
                <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300">
                    <div class="floating-label">Featured</div>
                    
                    <div class="bg-gray-50 rounded-xl p-4 mb-4">
                        <img src="{{p.default_variant.primary_image.url }}" alt="{{ p.name }}" class="h-56 mx-auto object-contain transition-transform duration-500 hover:scale-105" />
                    </div>

                    <h3 class="font-bold text-lg mb-1 text-gray-800">{{ p.name}}</h3>
                    <p class="text-[#A24E34] font-bold text-xl">₹{{ p.default_variant.price }}</p>

                    <a href="{% url 'product_details' p.uuid %}"
                       class="mt-4 px-6 py-2 bg-[#A24E34] text-white rounded-full text-sm font-semibold hover:bg-[#8D3A28] transition-all inline-block transform hover:scale-105">
                        Add to Cart
                    </a>
                </div>
            </div>
            {% endfor %}
            
            <!-- Duplicate content for seamless loop -->
            {% for p in featured_products %}
            <div class="product-card flex-shrink-0 relative">
                <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300">
                    <div class="floating-label">Featured</div>
                    
                    <div class="bg-gray-50 rounded-xl p-4 mb-4">
                        <img src="{{p.default_variant.primary_image.url }}" alt="{{ p.name }}" class="h-56 mx-auto object-contain transition-transform duration-500 hover:scale-105" />
                    </div>

                    <h3 class="font-bold text-lg mb-1 text-gray-800">{{ p.name}}</h3>
                    <p class="text-[#A24E34] font-bold text-xl">₹{{ p.default_variant.price }}</p>

                    <a href="{% url 'product_details' p.uuid %}"
                       class="mt-4 px-6 py-2 bg-[#A24E34] text-white rounded-full text-sm font-semibold hover:bg-[#8D3A28] transition-all inline-block transform hover:scale-105">
                        Add to Cart
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <a href="{% url 'userproduct_list' %}" 
       class="mt-8 inline-flex items-center gap-2 px-8 py-3 bg-[#A24E34] text-white rounded-full hover:bg-[#8D3A28] transition-all duration-300 font-semibold shadow-xl hover:shadow-2xl hover:scale-105 fade-in-up">
        See More →
    </a>
</section>

<div class="section-divider"></div>

<!-- ================= SHOP YOUR FAVOURITES ================= -->
<section class="w-full py-16 bg-gradient-to-br from-gray-50 to-white">
    
    <div class="text-center mb-12 fade-in-up">
        <h2 class="text-3xl md:text-4xl font-bold mb-3 text-[#A24E34]">Shop Your Favourites</h2>
        <p class="text-gray-600">Curated collections for every taste</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 px-6 md:px-16 stagger-animation">
        
        <div class="relative group overflow-hidden rounded-2xl shadow-xl hover-shine cursor-pointer gradient-overlay" >
            <img src="/static/images/vapo1.png" alt="Vappura Collection" class="w-full h-96 object-cover group-hover:scale-110 transition-transform duration-700" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6 z-10">
                <div class="text-white transform translate-y-0 group-hover:-translate-y-2 transition-transform duration-500">
                    <h3 class="text-xl font-bold mb-2">Premium Vappura</h3>
                    <p class="text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-200">Crafted Excellence</p>
                </div>
            </div>
        </div>

        <div class="relative group overflow-hidden rounded-2xl shadow-xl hover-shine cursor-pointer gradient-overlay" >
            <img src="/static/images/vapo2.png" alt="Limited Edition" class="w-full h-96 object-cover group-hover:scale-110 transition-transform duration-700" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6 z-10">
                <div class="text-white transform translate-y-0 group-hover:-translate-y-2 transition-transform duration-500">
                    <h3 class="text-xl font-bold mb-2">Limited Edition</h3>
                    <p class="text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-200">Exclusive Selection</p>
                </div>
            </div>
        </div>

        <div class="relative group overflow-hidden rounded-2xl shadow-xl hover-shine cursor-pointer gradient-overlay" >
            <img src="/static/images/vapo1.png" alt="Gift Collection" class="w-full h-96 object-cover group-hover:scale-110 transition-transform duration-700" />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent flex items-end p-6 z-10">
                <div class="text-white transform translate-y-0 group-hover:-translate-y-2 transition-transform duration-500">
                    <h3 class="text-xl font-bold mb-2">Gift Collections</h3>
                    <p class="text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-500 delay-200">Perfect for Celebrations</p>
                </div>
            </div>
        </div>

    </div>
</section>

<div class="section-divider"></div>

<!-- ================= HAND PICKED ================= -->
<section class="w-full py-16 text-center bg-white">
    
    <div class="mb-12 fade-in-up">
        <h2 class="text-3xl md:text-4xl font-bold mb-3 text-[#A24E34]">Hand Picked</h2>
        <p class="text-gray-600">Discover our handpicked curated bottles just for you</p>
    </div>

    <div class="scroll-container overflow-x-auto" id="handpicked-scroll">
        <div class="scroll-content slide-right" id="handpicked-content">
            {% for p in handpicked_products %}
            <div class="product-card flex-shrink-0 relative">
                <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300">
                    <div class="floating-label" style="background-color: #8D3A28;">Curated</div>
                    
                    <div class="bg-gray-50 rounded-xl p-4 mb-4">
                        <img src="{{ p.default_variant.primary_image.url }}" alt="{{ p.name }}" class="h-56 mx-auto object-cover rounded-lg transition-transform duration-500 hover:scale-105" />
                    </div>

                    <h3 class="font-bold text-lg mb-1 text-gray-800">{{ p.name }}</h3>
                    <p class="text-[#A24E34] font-bold text-xl">₹{{ p.default_variant.price }}</p>

                    <a href="{% url 'product_details' p.uuid %}"
                       class="mt-4 px-6 py-2 bg-[#A24E34] text-white rounded-full text-sm font-semibold hover:bg-[#8D3A28] transition-all inline-block transform hover:scale-105">
                        Add to Cart
                    </a>
                </div>
            </div>
            {% endfor %}
            
            <!-- Duplicate content for seamless loop -->
            {% for p in handpicked_products %}
            <div class="product-card flex-shrink-0 relative">
                <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300">
                    <div class="floating-label" style="background-color: #8D3A28;">Curated</div>
                    
                    <div class="bg-gray-50 rounded-xl p-4 mb-4">
                        <img src="{{ p.default_variant.primary_image.url }}" alt="{{ p.name }}" class="h-56 mx-auto object-cover rounded-lg transition-transform duration-500 hover:scale-105" />
                    </div>

                    <h3 class="font-bold text-lg mb-1 text-gray-800">{{ p.name }}</h3>
                    <p class="text-[#A24E34] font-bold text-xl">₹{{ p.default_variant.price }}</p>

                    <a href="{% url 'product_details' p.uuid %}"
                       class="mt-4 px-6 py-2 bg-[#A24E34] text-white rounded-full text-sm font-semibold hover:bg-[#8D3A28] transition-all inline-block transform hover:scale-105">
                        Add to Cart
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<div class="section-divider"></div>

<!-- ================= TRENDING NOW ================= -->
<section class="w-full py-16 text-center bg-gradient-to-br from-gray-50 to-white">
    
    <div class="mb-12 fade-in-up">
        <h2 class="text-3xl md:text-4xl font-bold mb-3 text-[#A24E34]">Trending Now</h2>
        <p class="text-gray-600">Most popular picks this season</p>
    </div>

    <div class="scroll-container overflow-x-auto" id="trending-scroll">
        <div class="scroll-content slide-left" id="trending-content">
            {% for p in trending_products %}
            <div class="product-card flex-shrink-0 relative">
                <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300">
                    <div class="floating-label" style="background-color: #B7472A;">Trending</div>
                    
                    <div class="bg-gray-50 rounded-xl p-4 mb-4">
                        <img src="{{ p.default_variant.primary_image.url }}" alt="{{ p.name }}" class="h-56 mx-auto object-contain transition-transform duration-500 hover:scale-105" />
                    </div>

                    <h3 class="font-bold text-lg mb-1 text-gray-800">{{ p.name }}</h3>
                    <p class="text-[#A24E34] font-bold text-xl">₹{{ p.default_variant.price }}</p>

                    <a href="{% url 'product_details' p.uuid %}"
                       class="mt-4 px-6 py-2 bg-[#A24E34] text-white rounded-full text-sm font-semibold hover:bg-[#8D3A28] transition-all inline-block transform hover:scale-105">
                        Add to Cart
                    </a>
                </div>
            </div>
            {% endfor %}
            
            <!-- Duplicate content for seamless loop -->
            {% for p in trending_products %}
            <div class="product-card flex-shrink-0 relative">
                <div class="bg-gradient-to-br from-white to-gray-50 p-6 rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300">
                    <div class="floating-label" style="background-color: #B7472A;">Trending</div>
                    
                    <div class="bg-gray-50 rounded-xl p-4 mb-4">
                        <img src="{{ p.default_variant.primary_image.url }}" alt="{{ p.name }}" class="h-56 mx-auto object-contain transition-transform duration-500 hover:scale-105" />
                    </div>

                    <h3 class="font-bold text-lg mb-1 text-gray-800">{{ p.name }}</h3>
                    <p class="text-[#A24E34] font-bold text-xl">₹{{ p.default_variant.price }}</p>

                    <a href="{% url 'product_details' p.uuid %}"
                       class="mt-4 px-6 py-2 bg-[#A24E34] text-white rounded-full text-sm font-semibold hover:bg-[#8D3A28] transition-all inline-block transform hover:scale-105">
                        Add to Cart
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Enhanced scroll functionality
        const scrollContainers = document.querySelectorAll('.scroll-container');
        
        scrollContainers.forEach(container => {
            let isDown = false;
            let startX;
            let scrollLeft;
            
            // Mouse drag functionality
            container.addEventListener('mousedown', (e) => {
                isDown = true;
                container.classList.add('grabbing');
                startX = e.pageX - container.offsetLeft;
                scrollLeft = container.scrollLeft;
            });
            
            container.addEventListener('mouseleave', () => {
                isDown = false;
                container.classList.remove('grabbing');
            });
            
            container.addEventListener('mouseup', () => {
                isDown = false;
                container.classList.remove('grabbing');
            });
            
            container.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - container.offsetLeft;
                const walk = (x - startX) * 2;
                container.scrollLeft = scrollLeft - walk;
            });
            
            // Mouse wheel horizontal scrolling
            container.addEventListener('wheel', (e) => {
                e.preventDefault();
                container.scrollLeft += e.deltaY;
            });
        });
        
        // Pause animation when user interacts with scroll
        const scrollContents = document.querySelectorAll('.scroll-content');
        
        scrollContents.forEach(content => {
            const container = content.parentElement;
            
            container.addEventListener('mouseenter', () => {
                content.style.animationPlayState = 'paused';
            });
            
            container.addEventListener('mouseleave', () => {
                content.style.animationPlayState = 'running';
            });
        });
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- 1. Mouse Move Parallax & Spotlight ---
        const heroSection = document.getElementById('heroSection');
        const parallaxLayers = document.querySelectorAll('.parallax-layer');

        heroSection.addEventListener('mousemove', (e) => {
            const x = e.clientX;
            const y = e.clientY;
            
            // Update CSS variables for the spotlight background
            const rect = heroSection.getBoundingClientRect();
            const relativeX = x - rect.left;
            const relativeY = y - rect.top;
            heroSection.style.setProperty('--mouse-x', `${relativeX}px`);
            heroSection.style.setProperty('--mouse-y', `${relativeY}px`);

            // Calculate center for parallax
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            const deltaX = (x - centerX) / centerX;
            const deltaY = (y - centerY) / centerY;

            // Move layers
            parallaxLayers.forEach(layer => {
                const speed = layer.getAttribute('data-speed');
                const xMove = deltaX * speed * 20; // Adjust multiplier for intensity
                const yMove = deltaY * speed * 20;
                layer.style.transform = `translate(${xMove}px, ${yMove}px)`;
            });
        });

        // --- 2. Scroll Animation Pauser (Existing Logic) ---
        const scrollContents = document.querySelectorAll('.scroll-content');
        scrollContents.forEach(content => {
            const container = content.parentElement;
            container.addEventListener('mouseenter', () => {
                content.style.animationPlayState = 'paused';
            });
            container.addEventListener('mouseleave', () => {
                content.style.animationPlayState = 'running';
            });
        });
    });
</script>
{% endblock %}
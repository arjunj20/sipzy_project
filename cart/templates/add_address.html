{% extends "base.html" %}
{% block content %}

<div class="min-h-screen bg-gradient-to-b from-amber-50/30 to-orange-50/20 py-10 px-4 overflow-hidden">
    <!-- Enhanced Animated Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0">
        <!-- Earthy, warm-toned blobs -->
        <div class="absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-r from-amber-100 to-orange-100 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
        <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-r from-amber-50 to-orange-50 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-gradient-to-r from-orange-100 to-amber-100 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
        
        <!-- Additional floating particles with earthy tones -->
        <div class="particle particle-1" style="background: linear-gradient(135deg, #B7472A 0%, #8B4513 100%);"></div>
        <div class="particle particle-2" style="background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);"></div>
        <div class="particle particle-3" style="background: linear-gradient(135deg, #D2691E 0%, #CD853F 100%);"></div>
        <div class="particle particle-4" style="background: linear-gradient(135deg, #A0522D 0%, #D2691E 100%);"></div>
        <div class="particle particle-5" style="background: linear-gradient(135deg, #8B4513 0%, #B7472A 100%);"></div>
    </div>

    <!-- Main Container -->
    <div class="relative z-10 max-w-lg mx-auto">
        <!-- Header with Enhanced Animation -->
        <div class="text-center mb-10 animate-fade-in-down">
            <div class="inline-block p-2 mb-4 bg-gradient-to-r from-amber-700 to-[#B7472A] rounded-2xl transform hover:rotate-6 transition-all duration-500 hover:scale-110 shadow-lg hover:shadow-xl" style="box-shadow: 0 10px 25px rgba(183, 71, 42, 0.2);">
                <svg class="w-12 h-12 text-white animate-float" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                </svg>
            </div>
            <h1 class="text-4xl font-bold text-amber-900 mb-2 animate-gradient tracking-tight" style="background: linear-gradient(135deg, #8B4513 0%, #B7472A 50%, #D2691E 100%); -webkit-background-clip: text; background-clip: text; color: transparent;">Add New Address</h1>
            <p class="text-amber-800/80 font-light animate-fade-in">Fill in your delivery details for a seamless experience</p>
            
            <!-- Enhanced Progress Indicator -->
            <div class="flex justify-center items-center mt-6 space-x-2">
                <div class="w-3 h-3 bg-gradient-to-r from-[#B7472A] to-amber-700 rounded-full animate-pulse-scale"></div>
                <div class="w-8 h-1 bg-gradient-to-r from-[#B7472A]/80 to-amber-300 rounded-full animate-progress"></div>
                <div class="w-3 h-3 bg-amber-300 rounded-full transition-all duration-500"></div>
                <div class="w-8 h-1 bg-amber-300 rounded-full"></div>
                <div class="w-3 h-3 bg-amber-300 rounded-full transition-all duration-500"></div>
            </div>
        </div>

        <!-- Enhanced Glass Form Container -->
        <div class="glass-card-sipzy p-8 rounded-2xl transform transition-all duration-500 hover:shadow-2xl animate-slide-up" style="border: 1px solid rgba(251, 191, 36, 0.1); box-shadow: 0 10px 30px rgba(183, 71, 42, 0.08);">
            <form method="POST" class="space-y-6">
                {% csrf_token %}
                
                <!-- Form Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                    
                    <!-- Full Name Field -->
                    <div class="group form-field-wrapper">
                        <div class="flex items-center mb-2">
                            <svg class="w-5 h-5 text-amber-700 mr-2 group-focus-within:text-[#B7472A] transition-all duration-300 group-focus-within:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            <label class="text-sm font-medium text-amber-900 group-focus-within:text-[#B7472A] transition-colors duration-300">Full Name</label>
                        </div>
                        <div class="relative input-container">
                            <input 
                                type="text" 
                                name="full_name" 
                                placeholder="John Appleseed" 
                                required
                                class="form-input-sipzy w-full pl-4 pr-10 py-3.5 bg-white border border-amber-200 rounded-xl focus:border-[#B7472A] focus:ring-2 focus:ring-[#B7472A]/30 focus:ring-opacity-50 transition-all duration-300 placeholder-amber-500 text-amber-900"
                            >
                            <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                                <div class="w-2 h-2 bg-[#B7472A] rounded-full opacity-0 group-focus-within:opacity-100 transition-all duration-300 animate-ping-slow"></div>
                            </div>
                            <div class="input-shine"></div>
                        </div>
                    </div>

                    <!-- Phone Number Field -->
                    <div class="group form-field-wrapper">
                        <div class="flex items-center mb-2">
                            <svg class="w-5 h-5 text-amber-700 mr-2 group-focus-within:text-[#B7472A] transition-all duration-300 group-focus-within:scale-110 group-focus-within:rotate-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                            </svg>
                            <label class="text-sm font-medium text-amber-900 group-focus-within:text-[#B7472A] transition-colors duration-300">Phone Number</label>
                        </div>
                        <div class="relative input-container">
                            <input 
                                type="text" 
                                name="phone_number" 
                                placeholder="+1 (555) 123-4567" 
                                required
                                class="form-input-sipzy w-full pl-4 py-3.5 bg-white border border-amber-200 rounded-xl focus:border-[#B7472A] focus:ring-2 focus:ring-[#B7472A]/30 focus:ring-opacity-50 transition-all duration-300 placeholder-amber-500 text-amber-900"
                            >
                            <div class="input-shine"></div>
                        </div>
                    </div>

                    <!-- Address Line 1 -->
                    <div class="md:col-span-2 group form-field-wrapper">
                        <div class="flex items-center mb-2">
                            <svg class="w-5 h-5 text-amber-700 mr-2 group-focus-within:text-[#B7472A] transition-all duration-300 group-focus-within:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                            </svg>
                            <label class="text-sm font-medium text-amber-900 group-focus-within:text-[#B7472A] transition-colors duration-300">Address Line 1</label>
                        </div>
                        <div class="relative input-container">
                            <input 
                                type="text" 
                                name="address_line1" 
                                placeholder="123 Apple Park Way" 
                                required
                                class="form-input-sipzy w-full pl-4 py-3.5 bg-white border border-amber-200 rounded-xl focus:border-[#B7472A] focus:ring-2 focus:ring-[#B7472A]/30 focus:ring-opacity-50 transition-all duration-300 placeholder-amber-500 text-amber-900"
                            >
                            <div class="input-shine"></div>
                        </div>
                    </div>

                    <!-- Address Line 2 -->
                    <div class="md:col-span-2 group form-field-wrapper">
                        <div class="flex items-center mb-2">
                            <svg class="w-5 h-5 text-amber-700 mr-2 group-focus-within:text-[#B7472A] transition-all duration-300 group-focus-within:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                            </svg>
                            <label class="text-sm font-medium text-amber-900 group-focus-within:text-[#B7472A] transition-colors duration-300">Address Line 2 (Optional)</label>
                        </div>
                        <div class="relative input-container">
                            <input 
                                type="text" 
                                name="address_line2" 
                                placeholder="Apt, Suite, Building (Optional)"
                                class="form-input-sipzy w-full pl-4 py-3.5 bg-white border border-amber-200 rounded-xl focus:border-[#B7472A] focus:ring-2 focus:ring-[#B7472A]/30 focus:ring-opacity-50 transition-all duration-300 placeholder-amber-500 text-amber-900"
                            >
                            <div class="input-shine"></div>
                        </div>
                    </div>

                    <!-- City -->
                    <div class="group form-field-wrapper">
                        <div class="flex items-center mb-2">
                            <svg class="w-5 h-5 text-amber-700 mr-2 group-focus-within:text-[#B7472A] transition-all duration-300 group-focus-within:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                            </svg>
                            <label class="text-sm font-medium text-amber-900 group-focus-within:text-[#B7472A] transition-colors duration-300">City</label>
                        </div>
                        <div class="relative input-container">
                            <input 
                                type="text" 
                                name="city" 
                                placeholder="Cupertino" 
                                required
                                class="form-input-sipzy w-full pl-4 py-3.5 bg-white border border-amber-200 rounded-xl focus:border-[#B7472A] focus:ring-2 focus:ring-[#B7472A]/30 focus:ring-opacity-50 transition-all duration-300 placeholder-amber-500 text-amber-900"
                            >
                            <div class="input-shine"></div>
                        </div>
                    </div>

                    <!-- State -->
                    <div class="group form-field-wrapper">
                        <div class="flex items-center mb-2">
                            <svg class="w-5 h-5 text-amber-700 mr-2 group-focus-within:text-[#B7472A] transition-all duration-300 group-focus-within:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"/>
                            </svg>
                            <label class="text-sm font-medium text-amber-900 group-focus-within:text-[#B7472A] transition-colors duration-300">State</label>
                        </div>
                        <div class="relative input-container">
                            <input 
                                type="text" 
                                name="state" 
                                placeholder="California" 
                                required
                                class="form-input-sipzy w-full pl-4 py-3.5 bg-white border border-amber-200 rounded-xl focus:border-[#B7472A] focus:ring-2 focus:ring-[#B7472A]/30 focus:ring-opacity-50 transition-all duration-300 placeholder-amber-500 text-amber-900"
                            >
                            <div class="input-shine"></div>
                        </div>
                    </div>

                    <!-- Pincode -->
                    <div class="md:col-span-2 group form-field-wrapper">
                        <div class="flex items-center mb-2">
                            <svg class="w-5 h-5 text-amber-700 mr-2 group-focus-within:text-[#B7472A] transition-all duration-300 group-focus-within:scale-110" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                            </svg>
                            <label class="text-sm font-medium text-amber-900 group-focus-within:text-[#B7472A] transition-colors duration-300">Pincode</label>
                        </div>
                        <div class="relative input-container">
                            <input 
                                type="text" 
                                name="pincode" 
                                placeholder="95014" 
                                required
                                class="form-input-sipzy w-full pl-4 py-3.5 bg-white border border-amber-200 rounded-xl focus:border-[#B7472A] focus:ring-2 focus:ring-[#B7472A]/30 focus:ring-opacity-50 transition-all duration-300 placeholder-amber-500 text-amber-900"
                            >
                            <div class="input-shine"></div>
                        </div>
                    </div>

                </div>

                <!-- Enhanced Submit Button -->
                <div class="pt-8 border-t border-amber-100">
                    <button 
                        type="submit"
                        class="w-full btn-sipzy-primary py-4 px-6 rounded-xl text-white font-semibold text-lg tracking-wide shadow-lg hover:shadow-xl transform transition-all duration-500 hover:scale-[1.02] active:scale-[0.98] group relative overflow-hidden"
                    >
                        <!-- Animated Background Layers -->
                        <span class="absolute inset-0 w-full h-full bg-gradient-to-r from-amber-700 via-[#B7472A] to-amber-800 group-hover:from-amber-800 group-hover:via-[#8D3A28] group-hover:to-amber-900 transition-all duration-500"></span>
                        
                        <!-- Shimmer Effect -->
                        <span class="absolute inset-0 w-full h-full overflow-hidden">
                            <span class="button-shimmer"></span>
                        </span>
                        
                        <!-- Button Content -->
                        <span class="relative flex items-center justify-center">
                            <svg class="w-5 h-5 mr-3 transform group-hover:rotate-12 group-hover:scale-110 transition-all duration-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                            Save Address
                            <svg class="w-5 h-5 ml-3 transform translate-x-0 group-hover:translate-x-2 transition-transform duration-500 opacity-0 group-hover:opacity-100" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                            </svg>
                        </span>
                    </button>
                    
                    <!-- Enhanced Back Link -->
                    <div class="text-center mt-6">
                        <a href="{% url 'checkout_page' %}" class="inline-flex items-center text-amber-700 hover:text-[#B7472A] transition-all duration-300 group relative overflow-hidden px-4 py-2 rounded-lg hover:bg-amber-50">
                            <svg class="w-4 h-4 mr-2 transform group-hover:-translate-x-1 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
                            </svg>
                            <span class="relative font-medium">
                                Back to previous page
                                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#B7472A] group-hover:w-full transition-all duration-300"></span>
                            </span>
                        </a>
                    </div>
                </div>
            </form>
        </div>

        <!-- Enhanced Security Notice -->
        <div class="mt-8 text-center animate-fade-in-up">
            <div class="inline-flex items-center text-sm text-amber-700 bg-amber-50/70 backdrop-blur-sm px-4 py-3 rounded-xl hover:bg-amber-50 transition-all duration-300 group cursor-default border border-amber-100">
                <svg class="w-4 h-4 mr-2 text-[#B7472A] animate-pulse-scale" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                </svg>
                <span class="group-hover:text-[#B7472A] transition-colors duration-300">Your information is secured with 256-bit SSL encryption</span>
            </div>
        </div>
    </div>
</div>

<style>
    /* Enhanced Custom Animations */
    @keyframes blob {
        0%, 100% {
            transform: translate(0px, 0px) scale(1);
        }
        33% {
            transform: translate(30px, -50px) scale(1.1);
        }
        66% {
            transform: translate(-20px, 20px) scale(0.9);
        }
    }
    
    @keyframes float {
        0%, 100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-10px);
        }
    }
    
    @keyframes gradient-shift {
        0%, 100% {
            background-position: 0% 50%;
        }
        50% {
            background-position: 100% 50%;
        }
    }
    
    @keyframes fade-in-down {
        0% {
            opacity: 0;
            transform: translateY(-20px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes fade-in-up {
        0% {
            opacity: 0;
            transform: translateY(20px);
        }
        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @keyframes slide-up {
        0% {
            opacity: 0;
            transform: translateY(30px) scale(0.95);
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }
    
    @keyframes pulse-scale {
        0%, 100% {
            transform: scale(1);
            opacity: 1;
        }
        50% {
            transform: scale(1.2);
            opacity: 0.8;
        }
    }
    
    @keyframes progress {
        0% {
            width: 0%;
            opacity: 0.3;
        }
        100% {
            width: 100%;
            opacity: 1;
        }
    }
    
    @keyframes shimmer {
        0% {
            transform: translateX(-100%) translateY(-100%) rotate(45deg);
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
        }
        100% {
            transform: translateX(100%) translateY(100%) rotate(45deg);
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.2) 50%, transparent 70%);
        }
    }
    
    @keyframes shine {
        0% {
            left: -100%;
        }
        100% {
            left: 200%;
        }
    }
    
    @keyframes particle-float {
        0%, 100% {
            transform: translate(0, 0) rotate(0deg);
            opacity: 0.2;
        }
        25% {
            transform: translate(100px, -100px) rotate(90deg);
            opacity: 0.4;
        }
        50% {
            transform: translate(200px, -50px) rotate(180deg);
            opacity: 0.3;
        }
        75% {
            transform: translate(100px, 100px) rotate(270deg);
            opacity: 0.5;
        }
    }
    
    /* Apply Animations */
    .animate-blob {
        animation: blob 7s infinite;
    }
    
    .animation-delay-2000 {
        animation-delay: 2s;
    }
    
    .animation-delay-4000 {
        animation-delay: 4s;
    }
    
    .animate-float {
        animation: float 3s ease-in-out infinite;
    }
    
    .animate-gradient {
        background-size: 200% 200%;
        animation: gradient-shift 3s ease infinite;
    }
    
    .animate-fade-in-down {
        animation: fade-in-down 0.8s ease-out;
    }
    
    .animate-fade-in {
        animation: fade-in-down 1s ease-out 0.2s both;
    }
    
    .animate-fade-in-up {
        animation: fade-in-up 1s ease-out 0.5s both;
    }
    
    .animate-slide-up {
        animation: slide-up 0.8s ease-out 0.3s both;
    }
    
    .animate-pulse-scale {
        animation: pulse-scale 2s ease-in-out infinite;
    }
    
    .animate-progress {
        animation: progress 2s ease-out forwards;
    }
    
    /* Floating Particles */
    .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        opacity: 0.3;
        animation: particle-float 15s infinite;
    }
    
    .particle-1 {
        top: 20%;
        left: 10%;
        animation-delay: 0s;
    }
    
    .particle-2 {
        top: 60%;
        left: 80%;
        animation-delay: 2s;
    }
    
    .particle-3 {
        top: 40%;
        left: 90%;
        animation-delay: 4s;
    }
    
    .particle-4 {
        top: 80%;
        left: 20%;
        animation-delay: 1s;
    }
    
    .particle-5 {
        top: 10%;
        left: 70%;
        animation-delay: 3s;
    }
    
    /* Sipzy Glass Effect */
    .glass-card-sipzy {
        background: rgba(255, 251, 235, 0.9);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(254, 243, 199, 0.3);
        box-shadow: 
            0 15px 35px rgba(183, 71, 42, 0.05),
            inset 0 1px 0 rgba(255, 255, 255, 0.8);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .glass-card-sipzy:hover {
        background: rgba(255, 251, 235, 0.95);
        box-shadow: 
            0 25px 50px rgba(183, 71, 42, 0.1),
            inset 0 1px 0 rgba(255, 255, 255, 0.9);
        transform: translateY(-2px);
    }
    
    /* Enhanced Form Inputs */
    .form-input-sipzy {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        font-weight: 500;
    }
    
    .form-input-sipzy:focus {
        box-shadow: 0 0 0 4px rgba(183, 71, 42, 0.15);
        background: rgba(255, 255, 255, 0.95);
        transform: translateY(-1px);
        border-color: #B7472A;
    }
    
    .form-input-sipzy:hover:not(:focus) {
        border-color: #fbbf24;
        background: rgba(255, 255, 255, 0.85);
    }
    
    /* Input Container Effects */
    .input-container {
        overflow: hidden;
        position: relative;
    }
    
    .input-shine {
        position: absolute;
        top: 0;
        left: -100%;
        width: 30%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        pointer-events: none;
        transition: left 0.6s;
    }
    
    .input-container:focus-within .input-shine {
        animation: shine 1.5s;
    }
    
    /* Form Field Wrapper Animation */
    .form-field-wrapper {
        animation: fade-in-up 0.6s ease-out both;
    }
    
    .form-field-wrapper:nth-child(1) { animation-delay: 0.4s; }
    .form-field-wrapper:nth-child(2) { animation-delay: 0.5s; }
    .form-field-wrapper:nth-child(3) { animation-delay: 0.6s; }
    .form-field-wrapper:nth-child(4) { animation-delay: 0.7s; }
    .form-field-wrapper:nth-child(5) { animation-delay: 0.8s; }
    .form-field-wrapper:nth-child(6) { animation-delay: 0.9s; }
    .form-field-wrapper:nth-child(7) { animation-delay: 1s; }
    
    /* Enhanced Gradient Button */
    .btn-sipzy-primary {
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 25px rgba(183, 71, 42, 0.25);
    }
    
    .btn-sipzy-primary:hover {
        box-shadow: 0 15px 35px rgba(183, 71, 42, 0.4);
    }
    
    /* Button Shimmer Effect */
    .button-shimmer {
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        animation: shimmer 3s infinite;
    }
    
    /* Smooth Scroll Behavior */
    html {
        scroll-behavior: smooth;
    }
    
    /* Focus Styles */
    *:focus {
        outline: none;
    }
    
    *:focus-visible {
        outline: 2px solid #B7472A;
        outline-offset: 2px;
    }
    
    /* Loading Animation */
    .loading-dots {
        display: inline-flex;
        align-items: center;
    }
    
    .loading-dots span {
        width: 8px;
        height: 8px;
        margin: 0 2px;
        background-color: currentColor;
        border-radius: 50%;
        animation: bounce 1.4s infinite ease-in-out both;
    }
    
    .loading-dots span:nth-child(1) {
        animation-delay: -0.32s;
    }
    
    .loading-dots span:nth-child(2) {
        animation-delay: -0.16s;
    }
    
    @keyframes bounce {
        0%, 80%, 100% {
            transform: scale(0);
        }
        40% {
            transform: scale(1);
        }
    }
    
    /* Ripple Animation */
    @keyframes ripple {
        to {
            transform: scale(4);
            opacity: 0;
        }
    }
    
    /* Additional Micro-interactions */
    .form-input-sipzy::placeholder {
        transition: all 0.3s ease;
        color: #92400e;
        opacity: 0.6;
    }
    
    .form-input-sipzy:focus::placeholder {
        transform: translateX(5px);
        opacity: 0.4;
    }
    
    /* Slow Ping Animation */
    @keyframes ping-slow {
        75%, 100% {
            transform: scale(2);
            opacity: 0;
        }
    }
    
    .animate-ping-slow {
        animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite;
    }
    
    /* Text color utilities for your brand */
    .text-brand-primary {
        color: #B7472A;
    }
    
    .text-brand-secondary {
        color: #8B4513;
    }
    
    .text-brand-accent {
        color: #D2691E;
    }
    
    /* Background color utilities */
    .bg-brand-primary {
        background-color: #B7472A;
    }
    
    .bg-brand-secondary {
        background-color: #8B4513;
    }
    
    /* Border color utilities */
    .border-brand-primary {
        border-color: #B7472A;
    }
    
    /* Additional animations for form */
    @keyframes form-field-pulse {
        0%, 100% {
            transform: translateY(0);
        }
        50% {
            transform: translateY(-3px);
        }
    }
    
    .form-field-wrapper:hover {
        animation: form-field-pulse 0.6s ease;
    }
</style>

<script>
    // Enhanced Form Interactions
    document.addEventListener('DOMContentLoaded', function() {
        // Add floating label effect
        const inputs = document.querySelectorAll('.form-input-sipzy');
        
        inputs.forEach(input => {
            // Add focus/blur effects
            input.addEventListener('focus', function() {
                this.parentElement.parentElement.classList.add('input-focused');
                // Add subtle vibration effect
                this.style.transform = 'translateY(-1px)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.parentElement.classList.remove('input-focused');
                this.style.transform = 'translateY(0)';
            });
            
            // Add ripple effect on click
            input.addEventListener('click', function(e) {
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.cssText = `
                    position: absolute;
                    border-radius: 50%;
                    background: rgba(183, 71, 42, 0.2);
                    transform: scale(0);
                    animation: ripple 0.6s linear;
                    width: ${size}px;
                    height: ${size}px;
                    top: ${y}px;
                    left: ${x}px;
                    pointer-events: none;
                    z-index: 1;
                `;
                
                this.parentElement.appendChild(ripple);
                
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            });
            
            // Add typing animation effect
            input.addEventListener('input', function() {
                this.style.transform = 'scale(1.01)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 100);
            });
        });
        
        // Form submission animation
        const form = document.querySelector('form');
        const submitBtn = form.querySelector('button[type="submit"]');
        
        form.addEventListener('submit', function(e) {
            // Optional: Add loading animation
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = `
                <span class="loading-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </span>
            `;
            submitBtn.disabled = true;
            
            // Note: Remove timeout in production - form will submit naturally
            // This is just for demo purposes
            // setTimeout(() => {
            //     submitBtn.innerHTML = originalText;
            //     submitBtn.disabled = false;
            // }, 2000);
        });
        
        // Add auto-format for phone number
        const phoneInput = document.querySelector('input[name="phone_number"]');
        if (phoneInput) {
            phoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length > 0) {
                    value = value.replace(/(\d{1})(\d{3})(\d{3})(\d{4})/, '+$1 ($2) $3-$4');
                }
                e.target.value = value;
            });
        }
        
        // Add smooth reveal animation for form
        const formContainer = document.querySelector('.glass-card-sipzy');
        formContainer.style.opacity = '0';
        formContainer.style.transform = 'translateY(20px)';
        
        setTimeout(() => {
            formContainer.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
            formContainer.style.opacity = '1';
            formContainer.style.transform = 'translateY(0)';
        }, 100);
        
        // Add parallax effect to background blobs
        let ticking = false;
        window.addEventListener('mousemove', (e) => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const blobs = document.querySelectorAll('.animate-blob');
                    const x = (e.clientX / window.innerWidth - 0.5) * 40;
                    const y = (e.clientY / window.innerHeight - 0.5) * 40;
                    
                    blobs.forEach((blob, index) => {
                        const speed = index * 0.3 + 0.5;
                        blob.style.transform = `translate(${x * speed}px, ${y * speed}px) scale(${1 + index * 0.05})`;
                    });
                    ticking = false;
                });
                ticking = true;
            }
        });
        
        // Add validation styling
        inputs.forEach(input => {
            input.addEventListener('invalid', function(e) {
                e.preventDefault();
                this.classList.add('border-red-400');
                this.classList.remove('border-amber-200');
                
                // Add shake animation
                this.style.animation = 'shake 0.5s';
                setTimeout(() => {
                    this.style.animation = '';
                }, 500);
            });
            
            input.addEventListener('input', function() {
                if (this.validity.valid) {
                    this.classList.remove('border-red-400');
                    this.classList.add('border-amber-200');
                }
            });
        });
        
        // Add success checkmark animation on valid input
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.value && this.validity.valid && this.hasAttribute('required')) {
                    const checkmark = document.createElement('div');
                    checkmark.innerHTML = `
                        <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                    `;
                    checkmark.className = 'absolute right-3 top-1/2 transform -translate-y-1/2 animate-fade-in-down';
                    
                    // Remove existing checkmark if any
                    const existing = this.parentElement.querySelector('.absolute.right-3 svg');
                    if (existing && existing.parentElement !== this.parentElement.querySelector('.w-2')) {
                        existing.parentElement.remove();
                    }
                    
                    this.parentElement.appendChild(checkmark);
                }
            });
        });
        
        // Add shake animation for invalid inputs
        const shakeStyle = document.createElement('style');
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                20%, 40%, 60%, 80% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(shakeStyle);
        
        // Add progress indicator animation
        const progressDots = document.querySelectorAll('.flex.justify-center.items-center > div');
        let currentStep = 0;
        
        // Simulate progress as user fills form
        let filledFields = 0;
        const requiredFields = document.querySelectorAll('input[required]');
        
        inputs.forEach(input => {
            input.addEventListener('blur', function() {
                if (this.value && this.validity.valid) {
                    filledFields++;
                    const progress = Math.floor((filledFields / requiredFields.length) * 3);
                    
                    if (progress > currentStep && progress < 3) {
                        currentStep = progress;
                        updateProgress(currentStep);
                    }
                }
            });
        });
        
        function updateProgress(step) {
            progressDots.forEach((dot, index) => {
                if (index <= step * 2) {
                    if (index % 2 === 0) {
                        dot.classList.remove('bg-amber-300');
                        dot.classList.add('bg-gradient-to-r', 'from-[#B7472A]', 'to-amber-700', 'animate-pulse-scale');
                    } else {
                        dot.classList.remove('bg-amber-300');
                        dot.classList.add('bg-gradient-to-r', 'from-[#B7472A]', 'to-amber-700');
                    }
                }
            });
        }
        
        // Add form field hover effect
        const formFields = document.querySelectorAll('.form-field-wrapper');
        formFields.forEach(field => {
            field.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
            });
            
            field.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });
    });
</script>

{% endblock %}
{% extends "base.html" %}
{% block content %}

<div class="container py-5">
  <div class="card shadow-sm mx-auto" style="max-width: 420px;">
    <div class="card-body text-center">

      <h4 class="mb-2">Verify OTP</h4>
      <p class="text-muted mb-4">
        Enter the 6-digit OTP sent to your email
      </p>

      <form method="POST" novalidate>
        {% csrf_token %}

        <div class="d-flex justify-content-between mb-4">
          {% for i in "123456" %}
            <input
              type="text"
              name="otp{{ forloop.counter }}"
              class="form-control text-center otp-input"
              maxlength="1"
              inputmode="numeric"
              autocomplete="one-time-code"
              required
            >
          {% endfor %}
        </div>

        {% if errors %}
          <div class="text-danger mb-2">
            {{ errors|first }}
          </div>
        {% endif %}

        {% if remaining_time %}
          <p class="text-muted mb-3">
            OTP expires in <strong>{{ remaining_time }}</strong> seconds
          </p>
        {% endif %}

        <button class="btn btn-success w-100">
          Verify OTP
        </button>
      </form>

    </div>
  </div>
</div>

<style>
  .otp-input {
    width: 48px;
    height: 52px;
    font-size: 20px;
    font-weight: 600;
  }
</style>

<script>
  const inputs = document.querySelectorAll(".otp-input");

  inputs.forEach((input, index) => {
    input.addEventListener("input", () => {
      if (input.value && index < inputs.length - 1) {
        inputs[index + 1].focus();
      }
    });

    input.addEventListener("keydown", (e) => {
      if (e.key === "Backspace" && !input.value && index > 0) {
        inputs[index - 1].focus();
      }
    });
  });
</script>

{% endblock %}

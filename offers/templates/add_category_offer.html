{% extends "admin_base.html" %}
{% block title %}Add Category Offer{% endblock %}

{% block content %}
<div class="p-6 md:p-8 max-w-4xl mx-auto">

<h1 class="text-3xl font-bold mb-4">Add Category Offer</h1>

<form method="POST" class="bg-white shadow rounded-xl p-6" novalidate>
{% csrf_token %}

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <div class="md:col-span-2">
        <label class="block font-medium mb-1">Offer Name</label>
        <input name="offer_name" 
               value="{{ offer_name|default:'' }}"
               class="w-full border rounded-lg px-4 py-2 {% if errors.offer_name %}border-red-500{% endif %}" 
               required>
        {% if errors.offer_name %}
            <p class="text-red-500 text-sm mt-1">{{ errors.offer_name }}</p>
        {% endif %}
    </div>

    <div class="md:col-span-2">
        <label class="block font-medium mb-1">Category</label>
        <select name="category" 
                class="w-full border rounded-lg px-4 py-2 {% if errors.category %}border-red-500{% endif %}" 
                required>
            <option value="">Select Category</option>
            {% for category in categories %}
                <option value="{{ category.id }}" {% if category_id == category.id|stringformat:"s" %}selected{% endif %}>
                    {{ category.name }}
                </option>
            {% endfor %}
        </select>
        {% if errors.category %}
            <p class="text-red-500 text-sm mt-1">{{ errors.category }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block font-medium mb-1">Discount (%)</label>
        <input type="number" name="discount_percent" min="1" max="90"
               value="{{ discount_percent|default:'' }}"
               class="w-full border rounded-lg px-4 py-2 {% if errors.discount_percent %}border-red-500{% endif %}" 
               required>
        {% if errors.discount_percent %}
            <p class="text-red-500 text-sm mt-1 font-semibold">{{ errors.discount_percent }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block font-medium mb-1">Start Date</label>
        <input type="date" name="start_date" 
               value="{{ start_date|default:'' }}"
               class="w-full border rounded-lg px-4 py-2 {% if errors.start_date %}border-red-500{% endif %}" 
               required>
        {% if errors.start_date %}
            <p class="text-red-500 text-sm mt-1">{{ errors.start_date }}</p>
        {% endif %}
    </div>

    <div>
        <label class="block font-medium mb-1">End Date</label>
        <input type="date" name="end_date" 
               value="{{ end_date|default:'' }}"
               class="w-full border rounded-lg px-4 py-2 {% if errors.end_date %}border-red-500{% endif %}" 
               required>
        {% if errors.end_date %}
            <p class="text-red-500 text-sm mt-1">{{ errors.end_date }}</p>
        {% endif %}
    </div>

    <div class="flex items-center mt-6">
        <input type="checkbox" name="is_active" {% if is_active != "off" %}checked{% endif %}>
        <span class="ml-2">Active</span>
    </div>

</div>

{% if errors.non_field %}
    <div class="mt-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-lg text-sm">
        {{ errors.non_field }}
    </div>
{% endif %}

<div class="mt-6 flex gap-3">
    <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">Save</button>
    <a href="{% url 'category_offer_list' %}"
       class="px-6 py-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition">Cancel</a>
</div>

</form>
</div>
{% endblock %}